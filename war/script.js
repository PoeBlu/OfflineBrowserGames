var m=!0,o=null,p=!1;function q(a){this.a=a?a.a:[]}q.prototype.add=function(a){this.a.push(a)};q.prototype.get=function(a){return this.a[a]};q.prototype.length=function(){return this.a.length};q.prototype.pop=function(){return this.a.pop()};q.prototype.indexOf=function(a){return this.a.indexOf(a)};q.prototype.remove=function(a){a=this.indexOf(a);if(-1==a)return p;this.a.splice(a,1);return m};function r(a){if(a){this.j=new q(a.j);this.b=new q(a.b);this.h=[];for(var b=0;b!=a.h.length;b++)this.h.push(new q(a.h[b]));this.c=[];for(b=0;b!=a.c.length;b++)this.c.push(new q(a.c[b]));this.i=new q(a.i);this.f=[];for(b=0;b!=a.f.length;b++)this.f.push(new q(a.f[b]))}else{this.j=new q;this.b=new q;this.h=[];this.c=[];this.i=new q;this.f=[];for(b=0;52!=b;b++)this.j.add(b);var b=this.j,a=t(localStorage.fa),b=b.a,d,c,e=b.length;if(e)for(;--e;)c=Math.floor(a()*(e+1)),d=b[c],b[c]=b[e],b[e]=d;for(a=0;7!=
a;a++){this.h[a]=new q;for(b=0;b<=a-1;b++)this.h[a].add(this.j.pop());this.c[a]=new q;this.c[a].add(this.j.pop())}for(;0<this.j.length();)this.b.add(this.j.pop());for(b=0;4!=b;b++)this.f[b]=new q}}function u(a){if(0==a.b.length())for(;a.i.length();){var b=a.i.pop();a.b.add(b)}else for(var d=0;3!=d&&a.b.length();d++)b=a.b.pop(),a.i.add(b)}function v(a){var b=Math.floor(a/13),a=a%13;return 0==a?[]:2>b?[26+(a-1),39+(a-1)]:[0+(a-1),13+(a-1)]}
function w(a){var b=Math.floor(a/13),a=a%13;return 12==a?[]:[13*b+(a+1)]}r.prototype.remove=function(a){for(var b=0;7!=b;b++){var d=this.c[b];if(d.remove(a))return 0==d.length()&&(a=this.h[b],0<a.length()&&(a=a.pop(),d.a.splice(0,0,a))),m}if(this.b.remove(a)||this.i.remove(a))return m;for(d=0;4!=d;d++)if(this.f[d].remove(a))return m;return p};
function y(a,b,d){for(;b;){var c;a:{c=a;for(var e=b,g=0;7!=g;g++){var l=c.c[g],f=l.indexOf(e);if(-1!=f&&f<l.length()-1){c=l.get(f+1);break a}}c=o}a.remove(b)&&a.c[d].add(b);b=c}};function z(a,b,d){var c=document.createElement("span");c.style.width=a.n+"px";c.style.height=a.m+"px";c.className="placeholder";c.style.backgroundPosition="-"+a.n*a.W+"px -"+a.m*a.F+"px";c.style.left=b+"px";c.style.top=d+"px";a.L.appendChild(c);return c}function A(a,b,d){var c=document.createElement("span");c.style.width=a.n+"px";c.style.height=a.m+"px";c.className="overlay";c.style.left=b+"px";c.style.top=d+"px";a.K.appendChild(c);return c}
function B(a){var b=document.createElement("span");b.style.width=a.n+"px";b.style.height=a.m+"px";b.className="card";D(a,b);return b}function E(a){var b=document.createElement("span");b.className="indicator";b.style.width=a.T+"px";b.style.height=a.Q+"px";b.style.backgroundPosition="-"+a.U+"px -"+a.V+"px";return b}function D(a,b){b.style.backgroundPosition=a.n*a.O+"px -"+a.m*a.F+"px"}function F(a,b,d){b.style.backgroundPosition="-"+a.n*(d%13)+"px -"+a.m*Math.floor(d/13)+"px"}
function G(a,b,d,c,e){a.v.hasOwnProperty(b)||(a.v[b]={});a.v[b][d+"/"+c]=(new Date).getTime();var g=a.a[b];J(a,g,o,o);if(Math.round(g.offsetLeft)==Math.round(d)&&Math.round(g.offsetTop)==Math.round(c))g.style.I="none",g.style.zIndex=0,e();else{g.style.zIndex=1;var l=(new Date).getTime();a.k[b]={startTime:l,$:l+a.P,M:g.offsetLeft,N:g.offsetTop,A:d,B:c,ea:e}}}
function K(a,b,d,c){a.aa=c.clientX;a.ba=c.clientY;for(c=0;52!=c;c++){var e=a.a[c];e.onmousemove=o;e.onclick=o}a.g.style.display="none";a.J=m;document.onmousemove=function(c){if(a.J)for(k in a.J=p,b){var d=a.a[b[k]];d.style.zIndex=1;d.style.I="rgba(0, 0, 0, 0.497656) -3px -3px 12px inset, rgba(0, 0, 0, 0.398438) 4px 5px 5px"}else for(k in b)d=a.a[b[k]],d.style.left=d.offsetLeft+c.clientX-a.ca+"px",d.style.top=d.offsetTop+c.clientY-a.da+"px";a.ca=c.clientX;a.da=c.clientY};document.onmouseup=function(c){var e=
a.aa==c.clientX&&a.ba==c.clientY,f=b[0],n=a.a[f];if(c=a.e[f]){if(e){var i=Number.MAX_VALUE,h=[];for(k in c)if(e=c[k],1==b.length||e.l){var j=a.v[f][e.x+"/"+e.y];if(!j)j=Number.MIN_VALUE;j==i?h.push(e):j<i&&(i=j,h=[e])}h&&(c=h);f=Number.MIN_VALUE;i=[];for(k in c)if(e=c[k],1==b.length||e.l)h=e.z,h==f?i.push(e):h>f&&(f=h,i=[e]);i&&(c=i)}f=n.offsetLeft;n=n.offsetTop;i=Number.MAX_VALUE;for(k in c)if(e=c[k],1==b.length||e.l)h=Math.pow(f-e.x,2)+Math.pow(n-e.y,2),h<i&&(i=h,closestSlot=e);closestSlot&&closestSlot.action()}document.onmousemove=
o;document.onmouseup=o;L(d);M(a,d)}}function J(a,b,d,c){c||d?b.onmousemove=function(){a.g.style.left=b.offsetLeft+a.R+"px";a.g.style.top=b.offsetTop+a.S+"px";b.parentNode.insertBefore(a.g,b.nextSibling);a.g.style.display="block";a.g.onmousedown=d;b.onmousedown=d;a.g.onclick=c;b.onclick=c;a.g.onmouseout=function(){a.g.style.display="none"}}:(b.onclick=o,b.onmousemove=o,b.onmousedown=o)}function N(a,b){a.w.removeChild(b);a.w.appendChild(b)}function O(a,b){a.style.I="none";a.style.zIndex=0;b.ea()}
function M(a,b){a.e={};for(k in a.k){var d=a.k[k],c=a.a[k];c.style.left=d.A+"px";c.style.top=d.B+"px";O(c,d);delete a.k[k]}for(var e=0;4!=e;e++){var g=b.f[e],l=a.G+a.H*e,f=g.length();if(0==f){var n=[0,13,26,39];for(k in n){var i=n[k],h=a.e[i];h==o&&(h=[]);new function(c,d,e){h.push({x:e,y:a.s,action:function(){b.remove(c)&&b.f[d].add(c)},z:3,l:p})}(i,e,l);a.e[i]=h}}else for(var j=0;j<f;j++){var d=g.get(j),c=a.a[d],x;if(j==f-1){var H=[d];new function(c,d,e){x=function(){F(a,d,e);J(a,d,function(d){K(a,
c,b,d)})}}(H,c,d);n=w(d);for(k in n)i=n[k],h=a.e[i],h==o&&(h=[]),new function(c,d){h.push({x:l,y:a.s,action:function(){b.remove(c)&&b.f[d].add(c)},z:3,l:p})}(i,e),a.e[i]=h}else x=function(){};G(a,d,l,a.s,x);N(a,c)}}for(e=0;7!=e;e++){g=b.h[e];f=g.length();for(j=0;j<f;j++)d=g.get(j),c=a.a[d],G(a,d,a.p+a.q*e,a.r+a.u*j,function(){}),D(a,c),N(a,c);var g=b.c[e],I=g.length();if(0==I)for(k in n=[12,25,38,51],n)i=n[k],h=a.e[i],h==o&&(h=[]),new function(c,d){h.push({x:a.p+a.q*d,y:a.r+0*a.u,action:function(){y(b,
c,d)},z:2,l:m})}(i,e,j),a.e[i]=h;else for(j=0;j<I;j++){d=g.get(j);c=a.a[d];H=g.a.slice(j);if(j==I-1)for(k in n=v(d),n)i=n[k],h=a.e[i],h==o&&(h=[]),new function(c,d,e,g){h.push({x:a.p+a.q*d,y:a.r+a.u*(e+g+1),action:function(){y(b,c,d)},z:2,l:m})}(i,e,j,f),a.e[i]=h;new function(c,d,e){x=function(){F(a,d,e);J(a,d,function(d){K(a,c,b,d)})}}(H,c,d);G(a,d,a.p+a.q*e,a.r+a.u*(j+f),x);N(a,c)}}for(var n=b.b.length(),s=0;s!=n;s++)d=b.b.get(s),c=a.a[d],D(a,c),N(a,c),G(a,d,a.t,a.o,function(){});J(a,a.ga,o,function(){u(b);
L(b);M(a,b)});for(var C=b.i.length(),s=0;s!=C;s++)new function(){var c=b.i.get(s),d=a.a[c],e;if(s==C-1){var g=[];g.push(c);e=function(){J(a,d,function(c){K(a,g,b,c)},o);F(a,d,c)}}else e=function(){F(a,d,c)};N(a,d);var f=s-(C-Math.min(3,C));0>f&&(f=0);G(a,c,a.X+a.Y*f,a.Z,e)};if(0==b.b.length()&&1>=b.i.length()){c=p;for(e=0;7!=e;e++)if(g=b.h[e],0<g.length()){c=m;break}c||window.setTimeout(function(){for(var c=0;7!=c;c++){var d=b.c[c];if(0<d.length()&&(j=d.length()-1,d=d.get(j),d=a.e[d]))for(k in d){var e=
d[k];if(!e.l){e.action();L(b);M(a,b);return}}}},400)}}function L(a){3<localStorage.d&&delete localStorage["gamePosition"+(localStorage.d-3)];localStorage.d++;localStorage["gamePosition"+localStorage.d]=JSON.stringify(a)};var P=new function(){function a(){window.setTimeout(a,1E3/this.D);var b=(new Date).getTime();for(k in c.k){var d=c.k[k],l=c.a[k],f=(b-d.startTime)/(d.$-d.startTime);1<f?(l.style.left=d.A+"px",l.style.top=d.B+"px",O(l,d),delete c.k[k]):(f=(Math.sin(f*(Math.PI/2-Math.PI/4)+Math.PI/4)-0.5)/0.5,l.style.left=f*(d.A-d.M)+d.M+"px",l.style.top=f*(d.B-d.N)+d.N+"px")}}this.C=document.getElementById("gameDiv");this.n=103;this.m=143;this.p=this.o=this.t=42;this.r=210;this.q=115;this.u=25;this.G=386;this.H=115;
this.s=this.o;this.T=109;this.Q=149;this.U=1;this.V=716;this.R=-4;this.S=-3;this.X=196;this.Y=22;this.Z=this.o;this.F=4;this.O=0;this.W=1;this.P=250;this.D=60;this.a=[];this.k={};this.v={};this.L=document.createElement("div");this.C.appendChild(this.L);this.w=document.createElement("div");this.C.appendChild(this.w);this.K=document.createElement("div");this.C.appendChild(this.K);for(var b=0;52!=b;b++){var d=B(this);this.a[b]=d;this.w.appendChild(d)}var c=this;this.g=E(this);window.setTimeout(a,1E3/
this.D);this.ja=z(this,this.t,this.o);this.ga=A(this,this.t,this.o);for(b=0;7!=b;b++)z(this,this.p+this.q*b,c.r);for(b=0;4!=b;b++)z(this,this.G+this.H*b,c.s)};window.redraw=function(){Q=new r;M(P,Q);u(Q);L(Q);M(P,Q)};window.newGame=function(){localStorage.d=0;localStorage.fa=Math.floor(1E5*Math.random());window.redraw()};document.oncontextmenu=function(){return p};var Q;0<localStorage.d?(Q=new r(JSON.parse(localStorage["gamePosition"+localStorage.d])),M(P,Q),M(P,Q)):window.newGame();
window.undo=function(){1<localStorage.d&&(localStorage.d--,Q=new r(JSON.parse(localStorage["gamePosition"+localStorage.d])),M(P,Q))};window.applicationCache&&window.applicationCache.addEventListener("updateready",function(){window.applicationCache.status==window.applicationCache.UPDATEREADY&&window.applicationCache.swapCache()},p);window.hidePrompt=function(){document.getElementById("chromePrompt").style.display="none"};document.getElementById("chromePrompt").className="animateOn";
var R=document.getElementById("menu"),S=document.getElementById("gears");S.onmouseover=function(){if("visible"!=R.className)document.getElementById("undoItem").style.display=1<localStorage.d?"block":"none",R.className="visible",T=p};var T=p;document.addEventListener("mouseover",function(a){for(a=a.target;a&&a!=document.body;){if(a==R||a==S){T=m;return}a=a.parentNode}if(T)R.className=""},p);("undefined"==typeof chrome||"undefined"==typeof chrome.app||chrome.app.isInstalled)&&window.hidePrompt();function U(){function a(a){for(var a=a.toString(),c=0;c<a.length;c++){b+=a.charCodeAt(c);var e=0.02519603282416938*b;b=e>>>0;e-=b;e*=b;b=e>>>0;e-=b;b+=4294967296*e}return 2.3283064365386963E-10*(b>>>0)}var b=4022871197;a.version="Mash 0.9";return a}
function t(){return function(a){function b(){var a=2091639*d+2.3283064365386963E-10*g;d=c;c=e;return e=a-(g=a|0)}var d=0,c=0,e=0,g=1;0==a.length&&(a=[+new Date]);for(var l=U(),d=l(" "),c=l(" "),e=l(" "),f=0;f<a.length;f++)d-=l(a[f]),0>d&&(d+=1),c-=l(a[f]),0>c&&(c+=1),e-=l(a[f]),0>e&&(e+=1);l=o;b.ka=function(){return 4294967296*b()};b.ia=function(){return b()+1.1102230246251565E-16*(2097152*b()|0)};b.version="Alea 0.9";b.ha=a;return b}(Array.prototype.slice.call(arguments))};
